<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMPERIUM - Monde Antique v19</title>
    <meta name="description" content="Dominez le monde antique par la conquête, la diplomatie, la technologie et le commerce.">
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' fill='%23b45309'/><text x='16' y='20' text-anchor='middle' fill='white' font-family='serif' font-size='20' font-weight='bold'>I</text></svg>" type="image/svg+xml">



    <script src="nav.js" defer></script>

    <style>
        :root {
            --gold-primary: #d97706; --gold-secondary: #f59e0b; --gold-light: #fbbf24;
            --roman-red: #dc2626; --roman-purple: #7c3aed;
            --success-green: #22c55e; --ally-blue: #3b82f6; --error-red: #ef4444;
            --dark-stone: #1e293b; --dark-marble: #334155; --dark-bg: #0f172a;
            --sea-blue: #4a90e2; --sea-deep-blue: #3a5a9a;
            --text-light: #e2e8f0; --text-muted: #94a3b8;
            --border-gold: rgba(217, 119, 6, 0.3); --shadow-gold: rgba(217, 119, 6, 0.4);
        }

    <!-- Scripts de jeu -->
    <script src="js/game.js" defer></script>
    <script src="js/world-view.js" defer></script>
    <script src="nav.js" defer></script>
    <script src="js/imperium_popup.js" defer></script>

        body {
            font-family: 'Times New Roman', serif;
            background: linear-gradient(135deg, var(--dark-bg) 0%, var(--dark-stone) 100%);
            color: var(--text-light);
            overflow: hidden;
            min-height: 100vh;
        }

        /* --- Structure & Layout --- */
        .imperium-ui { display: flex; flex-direction: column; height: 100vh; }
        .imperium-body { flex-grow: 1; max-width: 1600px; margin: 0 auto; width: 100%; padding: 1.5rem 2rem; overflow: hidden; }
        .main-content { height: 100%; position: relative; overflow: hidden; }
        .view-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(10px); border-radius: 1rem; border: 2px solid var(--border-gold); overflow-y: auto; padding: 1.5rem; box-shadow: 0 8px 25px rgba(0,0,0,0.2); display: flex; flex-direction: column; }
        
        .game-layout { display: flex; flex-direction: column; gap: 1.5rem; flex-grow: 1; overflow: hidden; }
        
        .world-map-container { position: relative; background: radial-gradient(ellipse at center, var(--sea-blue) 0%, var(--sea-deep-blue) 100%); border-radius: 1rem; border: 2px solid var(--border-gold); flex-grow: 1; overflow: hidden; cursor: grab; }
        .world-map-container:active { cursor: grabbing; }
        #map-content { position: relative; width: 100%; height: 100%; transform-origin: 0 0; }
        .world-marker { position: absolute; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 16px; color: white; font-weight: bold; transition: all 0.3s ease; cursor: pointer; border: 2px solid rgba(255,255,255,0.7); box-shadow: 0 0 12px rgba(0,0,0,0.5); z-index: 5; }
        .world-marker:hover { transform: scale(1.4); z-index: 10; }
        .marker-icon { position: absolute; bottom: -5px; right: -5px; width: 14px; height: 14px; border-radius: 50%; border: 1px solid var(--dark-bg); font-size: 10px; display: flex; align-items: center; justify-content: center; }
        .world-marker.capital { background: var(--gold-primary); border-color: var(--gold-light); animation: pulse 2s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(251, 191, 36, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(251, 191, 36, 0); } 100% { box-shadow: 0 0 0 0 rgba(251, 191, 36, 0); } }
        .world-marker.controlled { background: var(--success-green); }
        .world-marker.enemy { background: var(--roman-red); }
        .world-marker.ally { background: var(--ally-blue); }
        
        .legion-marker { position: absolute; width: 24px; height: 24px; background: var(--ally-blue); border: 2px solid var(--text-light); border-radius: 0.25rem; z-index: 6; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; font-size: 12px; }
        .legion-marker:hover { transform: scale(1.5); }

        .bottom-hud { display: flex; flex-direction: column; align-items: center; gap: 0.5rem; flex-shrink: 0; }
        .command-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; width: 100%; max-width: 600px; }
        .action-tile { background: rgba(30, 41, 59, 0.6); border-radius: 1rem; border: 1px solid var(--border-gold); padding: 1rem; text-align: center; cursor: pointer; transition: all 0.3s ease; }
        .action-tile:hover, .action-tile.active { border-color: var(--gold-light); transform: translateY(-2px); background: rgba(45, 55, 72, 0.8); }
        .tile-icon { font-size: 2rem; }
        .tile-title { font-weight: bold; margin-top: 0.5rem; }
        #command-preview-text { color: var(--text-muted); font-style: italic; height: 1.2em; transition: opacity 0.3s; }

        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center; }
        .modal-content { background: linear-gradient(135deg, var(--dark-marble) 0%, var(--dark-stone) 100%); margin: auto; padding: 2rem; border: 2px solid var(--gold-primary); border-radius: 1rem; width: 90%; max-width: 600px; box-shadow: 0 8px 30px rgba(0,0,0,0.5); text-align: center; position: relative; transform: scale(0.9); opacity: 0; animation: modalFadeIn 0.3s forwards; }
        @keyframes modalFadeIn { to { transform: scale(1); opacity: 1; } }
        .close-button { color: var(--text-muted); font-size: 28px; font-weight: bold; position: absolute; top: 10px; right: 20px; cursor: pointer; }
        .modal-title { color: var(--gold-light); font-size: 1.8rem; margin-bottom: 1rem; }
        .modal-body { color: var(--text-light); font-size: 1.1rem; line-height: 1.5; margin-bottom: 1.5rem; white-space: pre-wrap; max-height: 60vh; overflow-y: auto; text-align: left; }
        .detail-row { display: grid; grid-template-columns: 1fr 1fr; text-align: left; padding: 0.5rem; border-bottom: 1px solid var(--border-gold); }
        .tech-item, .edict-item, .governor-item, .legion-item { padding: 1rem; border: 1px solid var(--border-gold); border-radius: 0.5rem; margin-bottom: 1rem; }
        .modal-buttons { display: flex; flex-direction: column; gap: 0.75rem; margin-top: 1rem; }
        .modal-btn { padding: 0.7rem 1.5rem; background: linear-gradient(135deg, var(--gold-primary), var(--gold-secondary)); color: white; border: none; border-radius: 0.5rem; font-weight: bold; cursor: pointer; }
        
        #notifications-container { position: fixed; bottom: 20px; right: 20px; z-index: 2000; display: flex; flex-direction: column; gap: 10px; }
        .notification { background: rgba(30, 41, 59, 0.9); backdrop-filter: blur(5px); color: var(--text-light); padding: 1rem 1.5rem; border-radius: 0.5rem; border-left: 4px solid var(--gold-primary); box-shadow: 0 4px 15px rgba(0,0,0,0.3); opacity: 0; transform: translateX(100%); animation: slideInFadeOut 5s forwards; }
        @keyframes slideInFadeOut { 0% { opacity: 0; transform: translateX(100%); } 15% { opacity: 1; transform: translateX(0); } 85% { opacity: 1; transform: translateX(0); } 100% { opacity: 0; transform: translateX(100%); } }

    </style>


</head>
<body>
    <div id="notifications-container"></div>


    <div class="imperium-ui">
        <div class="imperium-body">


            <main class="main-content">
                <div class="view-container" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(10px); border-radius: 1rem; border: 2px solid var(--border-gold); overflow-y: auto; padding: 1.5rem; box-shadow: 0 8px 25px rgba(0,0,0,0.2); display: flex; flex-direction: column;">
                    <div class="game-layout" style="display: flex; flex-direction: column; gap: 1.5rem; flex-grow: 1; overflow: hidden;">
                        <div class="world-map-container" id="world-map">
                            <div id="map-content" style="position: relative; width: 100%; height: 100%; transform-origin: 0 0;">
                                <!-- La carte est générée par world-view.js -->
                            </div>
                        </div>
                        <div class="bottom-hud" style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem; flex-shrink: 0;">
                            <div class="command-grid" id="command-grid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; width: 100%; max-width: 600px;">
                                <!-- Les commandes sont générées par world-view.js -->
                            </div>
                            <div id="command-preview-text" style="color: var(--text-muted); font-style: italic; height: 1.2em; transition: opacity 0.3s;"></div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Modale personnalisée pour la vue du monde -->
    <div id="customModal" class="modal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center;">
        <div class="modal-content" style="background: linear-gradient(135deg, var(--dark-marble) 0%, var(--dark-stone) 100%); margin: auto; padding: 2rem; border: 2px solid var(--gold-primary); border-radius: 1rem; width: 90%; max-width: 600px; box-shadow: 0 8px 30px rgba(0,0,0,0.5); text-align: center; position: relative;">
            <span class="close-button" style="color: var(--text-muted); font-size: 28px; font-weight: bold; position: absolute; top: 10px; right: 20px; cursor: pointer;">&times;</span>
            <h3 class="modal-title" id="modalTitle"></h3>
            <div class="modal-body" id="modalBody" style="color: var(--text-light); font-size: 1.1rem; line-height: 1.5; margin-bottom: 1.5rem; white-space: pre-wrap; max-height: 60vh; overflow-y: auto; text-align: left;"></div>
            <div class="modal-buttons" id="modalButtons" style="display: flex; flex-direction: column; gap: 0.75rem; margin-top: 1rem;"></div>
        </div>
    </div>

    <!-- La popup IMPERIUM sera injectée ici par imperium_popup.js -->
</body>
</html>
